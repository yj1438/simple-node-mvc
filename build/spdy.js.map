{"version":3,"sources":["spdy.js"],"names":[],"mappings":"AAAA;;AACA;;;;AACA;;;;;;AAEA,IAAI,SAAS,QAAQ,UAAR,CAAb;AAAA,IACI,SAAS,QAAQ,UAAR,CADb;;AAGA,IAAI,UAAU,OAAO,WAArB;;AAEA,IAAI,MAAM,eAAK,YAAL,CAAkB,OAAlB,EAA2B,UAAU,GAAV,EAAe,GAAf,EAAoB;AACrD;AACA;AACA,QAAI,YAAY,EAAhB;AACA,QAAI,EAAJ,CAAO,MAAP,EAAe,UAAU,KAAV,EAAiB;AAC5B,qBAAa,KAAb;AACH,KAFD,EAEG,EAFH,CAEM,KAFN,EAEa,YAAY;AACrB,YAAI,IAAJ,GAAW,SAAX;AACA,eAAO,cAAP,CAAsB,GAAtB,EAA2B,GAA3B;AACH,KALD;AAMH,CAVS,EAUP,MAVO,CAUA,OAAO,QAVP,EAUiB,OAAO,IAVxB,EAU8B,YAAY;AAChD,YAAQ,GAAR,CAAY,oCAAoC,OAAO,IAA3C,GAAkD,GAAlD,GAAwD,OAAO,QAA/D,GAA0E,GAAtF;AACH,CAZS,CAAV;;AAcA,IAAI,EAAJ,CAAO,OAAP,EAAgB,UAAU,GAAV,EAAe;AAC3B,SAAK,IAAL,CAAU,KAAV;AACH,CAFD;;AAIA;;;AAGA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,KAAK,YAAL,CAAkB,UAAU,GAAV,EAAe,GAAf,EAAoB;AAClC,QAAI,SAAJ,CAAc,GAAd,EAAmB,EAAE,YAAY,aAAa,IAAI,OAAJ,CAAY,IAAzB,GAAgC,IAAI,GAAlD,EAAnB;AACA,QAAI,GAAJ;AACH,CAHD,EAGG,MAHH,CAGU,OAAO,WAHjB,EAG8B,OAAO,IAHrC","file":"spdy.js","sourcesContent":["'use strict';\nimport spdy from 'spdy';\nimport fs from 'fs';\n\nvar config = require('./config'),\n    server = require('./server');\n\nvar options = config.certificate;\n\nvar app = spdy.createServer(options, function (req, res) {\n    //处理一般的 POST 数据 \n    // 如果是 form-data 形的数据，用 multiparty 处理\n    var _postData = '';\n    req.on('data', function (chunk) {\n        _postData += chunk;\n    }).on('end', function () {\n        req.post = _postData;\n        server.handlerRequest(req, res);\n    });\n}).listen(config.port_ssl, config.host, function () {\n    console.log('SPDY Server running at https://' + config.host + ':' + config.port_ssl + '/');\n});\n\napp.on('error', function (err) {\n    this.emit(\"err\");\n});\n\n/*\n * http 方式的 redirect\n */\nvar http = require('http');\nhttp.createServer(function (req, res) {\n    res.writeHead(301, { \"Location\": \"https://\" + req.headers.host + req.url });\n    res.end();\n}).listen(config.port_normal, config.host);\n\n\n\n"],"sourceRoot":"/source/"}