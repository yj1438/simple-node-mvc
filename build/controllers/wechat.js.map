{"version":3,"sources":["controllers/wechat.js"],"names":[],"mappings":"AAAA;;AAEA,IAAM,YAAY,QAAQ,8BAAR,CAAlB;AAAA,IACM,UAAU,QAAQ,4BAAR,CADhB;AAAA,IAEM,UAAU,QAAQ,2BAAR,CAFhB;;AAKA;;;AAGA,QAAQ,eAAR,GAA0B,YAAY;AAAA;;AAClC,QAAM,OAAO,KAAK,GAAlB;AAAA,QACI,QAAQ,KAAK,GAAL,CAAS,OAAT,CAAiB,SAAjB,KAA+B,2DAD3C;;AAGA,QAAI,OAAO,IAAX;;AAEA,YAAQ,GAAR,CAAY,KAAZ;;AAEA,cAAU,UAAC,MAAD,EAAY;AAClB,YAAI,MAAJ,EAAY;AACR,mBAAO,QAAQ,MAAR,EAAgB,KAAhB,CAAP;AACA;AACA,iBAAK,KAAL,GAAa,QAAQ,MAArB;AACH;AACD,cAAK,UAAL,CAAgB,IAAhB;AACH,KAPD;AASH,CAjBD","file":"controllers/wechat.js","sourcesContent":["'use strict';\n\nconst getTicket = require('./../common/wechat/getTicket'),\n      getSign = require('./../common/wechat/getSign'),\n      APP_KEY = require('./../common/wechat/AppKey'); \n\n\n/**\n * 获取微信 JS SDK 的 ticket\n */\nexports.get_js_api_sign = function () {\n    const _req = this.req,\n        refer = this.req.headers['referer'] || 'http://yinjie.dev.babytree-inc.com/app/dayima/index/index';\n\n    let sign = null;\n\n    console.log(refer);\n\n    getTicket((ticket) => {\n        if (ticket) {\n            sign = getSign(ticket, refer);\n            //delete sign.jsapi_ticket;\n            sign.appId = APP_KEY.APP_ID;\n        }\n        this.renderJson(sign);\n    });\n\n}"],"sourceRoot":"/source/"}