{"version":3,"sources":["controllers/text.js"],"names":[],"mappings":"AAAA;;AACA,IAAM,WAAW,QAAQ,UAAR,CAAjB;AACA,IAAM,KAAK,QAAQ,IAAR,CAAX;AACA,IAAM,eAAe,QAAQ,yBAAR,CAArB;;AAEA,IAAM,KAAK,SAAS,eAAT,CAAyB;AAChC,WAAO,GAAG,gBAAH,CAAoB,mBAApB;AADyB,CAAzB,CAAX;;AAIA;;;;AAIA,GAAG,EAAH,CAAM,MAAN,EAAc,UAAC,IAAD,EAAU;AACpB,QAAI,eAAJ;AAAA,QACI,iBADJ;AAEA,QAAI;AACA,iBAAS,KAAK,KAAL,CAAW,IAAX,CAAT;AACA,mBAAW;AACP,qBAAS,OAAO,MADT;AAEP,wBAAY,OAAO,UAFZ;AAGP,2BAAe,OAAO,aAHf;AAIP,qBAAS,OAAO,OAJT;AAKP,wBAAY,OAAO,UALZ;AAMP,qBAAS,OAAO,MAAP,GAAgB,CAAhB,GAAoB,CANtB;AAOP,sBAAU,OAAO,QAPV;AAQP,uBAAW,OAAO;AARX,SAAX;AAUA,qBAAa,GAAb,CAAiB,QAAjB,EAA2B,UAAC,GAAD,EAAM,IAAN,EAAe;AACtC,oBAAQ,GAAR,CAAY,KAAK,QAAjB;AACH,SAFD;AAGH,KAfD,CAeE,OAAO,GAAP,EAAY;AACV,gBAAQ,GAAR,CAAY,GAAZ;AACH;AACJ,CArBD,EAqBG,EArBH,CAqBM,OArBN,EAqBe,UAAC,CAAD,EAAO;AAClB,YAAQ,GAAR,CAAY,CAAZ;AACH,CAvBD;;AAyBA","file":"controllers/text.js","sourcesContent":["'use strict';\nconst readline = require('readline');\nconst fs = require('fs');\nconst http2Service = require('../service/http2Service');\n\nconst rl = readline.createInterface({\n    input: fs.createReadStream('data/ua_data.json')\n});\n\n/**\n * 将原来保存在文件中的数据读到数据库中\n *\n */\nrl.on('line', (line) => {\n    let uaData,\n        saveData;\n    try {\n        uaData = JSON.parse(line);\n        saveData = {\n            hash_id: uaData.hashId,\n            agent_name: uaData.agent_name,\n            agent_version: uaData.agent_version,\n            os_name: uaData.os_name,\n            os_version: uaData.os_version,\n            is_spdy: uaData.isSpdy ? 1 : 0,\n            protocol: uaData.protocol,\n            ua_string: uaData.uaString\n        };\n        http2Service.add(saveData, (err, rows) => {\n            console.log(rows.insertId);\n        })\n    } catch (err) {\n        console.log(err);\n    }\n}).on('close', (e) => {\n    console.log(e);\n});\n\n/*\nconst rl = readline.createInterface({\n        input: fs.createReadStream('data/ua_data.json')\n    });\n    rl.on('line', (line) => {\n        uaListData.push(JSON.parse(line));\n    }).on('close', () => {\n        callback(uaListData);\n    });\n*/"],"sourceRoot":"/source/"}