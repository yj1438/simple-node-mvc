{"version":3,"sources":["server.js"],"names":[],"mappings":"AAAA;;;;;QAgBgB,c,GAAA,c;;AAdhB;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGO,SAAS,cAAT,CAAwB,GAAxB,EAA6B,GAA7B,EAAkC;AACrC,QAAM,aAAa,gBAAM,aAAN,CAAoB,IAAI,GAAxB,EAA6B,IAAI,MAAjC,CAAnB;AACA,QAAI,WAAW,MAAf,EAAuB;AACnB,YAAM,aAAa,QAAQ,mBAAmB,WAAW,UAAtC,CAAnB;AACA,YAAI,WAAW,WAAW,MAAtB,CAAJ,EAAmC;AAC/B,gBAAM,oBAAoB,6BAAmB,GAAnB,EAAwB,GAAxB,CAA1B;AACA,uBAAW,WAAW,MAAtB,EAA8B,IAA9B,CAAmC,iBAAnC;AACH,SAHD,MAGO;AACH,gCAAU,UAAV,CAAqB,GAArB,EAA0B,GAA1B,EAA+B,wBAAwB,WAAW,UAAnC,GAAgD,oBAAhD,GAAuE,WAAW,MAAlF,GAA2F,GAA1H;AACH;AACJ,KARD,MAQO;AACH,YAAM,gBAAgB,4BAAkB,GAAlB,EAAuB,GAAvB,CAAtB;AACA,sBAAc,MAAd;AACH;AACJ","file":"server.js","sourcesContent":["'use strict';\n\nimport BaseController from './lib/BaseController';\nimport route from './lib/route';\nimport httpError from './lib/httpError';\nimport StaticContent from './lib/StaticContent';\n\n//===如果有未处理的异常抛出，可以在这里捕获到\n//process.on('uncaughtException', function (err) {\n//    console.log(err);\n//});\n//===\n\n/**\n * 所有请求的统一入口\n */\nexport function handlerRequest(req, res) {\n    const actionInfo = route.getActionInfo(req.url, req.method);\n    if (actionInfo.action) {\n        const controller = require('./controllers/' + actionInfo.controller);\n        if (controller[actionInfo.action]) {\n            const controllerContext = new BaseController(req, res);\n            controller[actionInfo.action].call(controllerContext);\n        } else {\n            httpError.handler500(req, res, 'ERROR: controller \"' + actionInfo.controller + '\" without action \"' + actionInfo.action + '\"');\n        }\n    } else {\n        const staticContent = new StaticContent(req, res);\n        staticContent.handle();\n    }\n} "],"sourceRoot":"/source/"}