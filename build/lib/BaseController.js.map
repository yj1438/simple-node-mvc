{"version":3,"sources":["lib/BaseController.js"],"names":[],"mappings":"AAAA;;;;;AAKA;;;;;;;;AACA,IAAM,OAAO,QAAQ,MAAR,CAAb;AAAA,IACI,YAAY,QAAQ,KAAR,EAAe,KAD/B;AAAA,IAEI,cAAc,QAAQ,aAAR,CAFlB;AAAA,IAGI,aAAa,QAAQ,cAAR,CAHjB;AAAA,IAII,YAAY,QAAQ,aAAR,CAJhB;;AAMA,IAAM,iBAAiB,SAAjB,cAAiB,CAAU,GAAV,EAAe,GAAf,EAAoB;AACvC,QAAI,UAAU,IAAI,OAAlB;AAAA,QACI,MAAM,IAAI,GADd;AAAA,QAEI,SAAS,UAAU,GAAV,CAFb;AAAA,QAGI,gBAHJ;AAAA,QAII,WAAW,EAJf;AAKA,QAAI;AACA,mBAAW,YAAY,KAAZ,CAAkB,OAAO,KAAzB,CAAX;AACA,kBAAU,IAAI,IAAJ,GAAW,YAAY,KAAZ,CAAkB,IAAI,IAAtB,CAAX,GAAyC,EAAnD;AACA,mBAAW,sBAAc,QAAd,EAAwB,OAAxB,CAAX;AACH,KAJD,CAIE,OAAO,GAAP,EAAY;AACV,gBAAQ,GAAR,CAAY,GAAZ;AACA,gBAAQ,GAAR,CAAY,QAAZ;AACH;AACD,SAAK,GAAL,GAAW,GAAX;AACA,SAAK,GAAL,GAAW,GAAX;AACA,SAAK,MAAL,GAAc,QAAd;AACA,SAAK,UAAL,GAAkB,UAAU,UAA5B;AACA,SAAK,UAAL,GAAkB,UAAU,UAA5B;AACH,CAnBD;;AAqBA,eAAe,SAAf,GAA2B,UAA3B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,OAAP,GAAiB,cAAjB","file":"lib/BaseController.js","sourcesContent":["/**\n * BaseController\n * 1.在controller里加入模板引擎\n * 2.对 post 和 URL 里的参数进行整理\n */\n'use strict';\nconst path = require('path'),\n    url_parse = require('url').parse,\n    querystring = require('querystring'),\n    viewEngine = require('./viewEngine'),\n    httpError = require('./httpError');\n\nconst BaseController = function (req, res) {\n    let headers = req.headers,\n        url = req.url,\n        urlObj = url_parse(url),\n        postObj,\n        paramObj = {};\n    try {\n        paramObj = querystring.parse(urlObj.query);\n        postObj = req.post ? querystring.parse(req.post) : {};\n        paramObj = Object.assign(paramObj, postObj);\n    } catch (err) {\n        console.log(err);\n        console.log(paramObj);\n    }\n    this.req = req;\n    this.res = res;\n    this.params = paramObj;\n    this.handler404 = httpError.handler404;\n    this.handler500 = httpError.handler500;\n};\n\nBaseController.prototype = viewEngine;\n\n//BaseController.prototype.render = function (viewName, data) {\n//    viewEngine.render.call(this, viewName, data);\n//};\n//BaseController.prototype.renderJson = function (json) {\n//    viewEngine.renderJson.call(this, json);\n//};\n\nmodule.exports = BaseController;"],"sourceRoot":"/source/"}